<!DOCTYPE HTML>
<html>
<head>
  <meta charset="utf-8">
  
  <title>Practical Vim | Pegasus&#39; Blog</title>
  <meta name="author" content="PegasusWang">
  
  <meta name="description" content="PegasusWang 的日常记录">
  
  
  <meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=1">

  <meta property="og:title" content="Practical Vim"/>
  <meta property="og:site_name" content="Pegasus&#39; Blog"/>

  
    <meta property="og:image" content=""/>
  

  <link href="/favicon.ico" rel="icon">
  <link rel="alternate" href="/atom.xml" title="Pegasus&#39; Blog" type="application/atom+xml">
  <link rel="stylesheet" href="//netdna.bootstrapcdn.com/bootstrap/3.1.0/css/bootstrap.min.css">
<link rel="stylesheet" href="//netdna.bootstrapcdn.com/font-awesome/4.0.3/css/font-awesome.css">
<link rel="stylesheet" href="/css/style.css">
  <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/2.1.1/jquery.min.js"></script>
  <!--[if lt IE 9]><script src="//html5shiv.googlecode.com/svn/trunk/html5.js"></script><![endif]-->
  
</head>

<body>
  <header id="header" class='normal_mode'>
    <nav id="main-nav">
  <ul class='container'>
    
      <li><a href="/archives">Archives</a></li>
    
      <li><a href="/about">About</a></li>
    
      <li><a href="https://github.com/pegasuswang/vim-config">Neovim</a></li>
    
      <li><a href="https://www.zhihu.com/people/pegasus-wang/activities">知乎</a></li>
    
      <li><a href="http://python-web-guide.readthedocs.io/zh/latest/">Python入坑指南</a></li>
    
  </ul>
  <div class="clearfix"></div>
</nav>
  </header>
  <div id="content" class="container">
    <article class="post">
  
    <div class="gallery">
  <div class="photoset">
    
      <img src="">
    
  </div>
  <div class="control">
    <div class="prev"></div>
    <div class="next"></div>
  </div>
</div>
  
  <div class="post-content">
    <header>
      
      <time datetime="2017-02-13T11:38:10.000Z"><a href="/2017/02/13/tools/practical-vim/">周一, 2月 13 2017, 7:38:10 晚上</a></time>

  
    <h1 class="title">Practical Vim</h1>
  


  
  <div class="categories">
  	<i class="fa fa-folder-open"></i>
    <a href="/categories/tools/">tools</a>
  </div>


  
  <div class="tags">
  	<i class="fa fa-tag"></i>
    <a href="/tags/vim/">vim</a>
  </div>

<div class="clear"></div>
      
    </header>
    <div class="entry">
      
        <blockquote>
<p>Do one thing, and do it well. - A principle of Unix philosopy</p>
</blockquote>
<p>学习和使用vim有几年了，我的编辑器学习之路也该告一段落了，目前使用vim和一些插件基本能满足日常代码和文档(博客，笔记，代码文档)的编辑需求了，也无力折腾其他编辑器了。现在大部分时间都是在终端和vim里工作，我觉得在vim上花的时间还是值得的。本博客所有的文章都是在vim里写的，配合markdown插件可以在浏览器里即时预览。本博客是《Practical Vim》读书笔记，不是一本入门书，以一个个tip的形式组织，凝聚了作者的使用智慧，结合自己的使用经验做个简单的记录。</p>
<a id="more"></a>
<h2 id="CHAPTER-1-The-Vim-Way"><a href="#CHAPTER-1-The-Vim-Way" class="headerlink" title="CHAPTER 1: The Vim Way"></a>CHAPTER 1: The Vim Way</h2><ul>
<li>Tip1: Meet the Dot Command: 使用.重复上一个操作，可以视作宏。</li>
<li>Tip2: Don’t Repeat Yourself: 我们可以用A替代$a移动到行尾进行编辑。类似还有C,I,S,O等</li>
<li>Tip3: Take One Step Back, Then Three Forward: 适当组合键位可以充分发挥.重复的优势。我们可以用f{char}来查找字母，”;”可以用来重复上一次查找，之后用”.”重复上次一操作，”,”可以用来返回上一次查找</li>
<li>Tip4: Act, Repeat, Reverse: 善用undo操作。</li>
<li>Tip5: Find and Replace by Hand: 使用<code>*</code>和<code>#</code>查找下一个或者上一个匹配。</li>
<li>Tip6: Meet the Dot formula: One Keystroke to Move, One Keystroke to Execute.</li>
</ul>
<h2 id="CHAPTER2-Normal-Mode"><a href="#CHAPTER2-Normal-Mode" class="headerlink" title="CHAPTER2: Normal Mode"></a>CHAPTER2: Normal Mode</h2><ul>
<li>Tip7: Pause with Your Brush Off the Page: vim和其他编辑器一个显著不同就是默认不是编辑模式(insert mode)而是normal模式。实际上在编程中，大部分时间花在浏览，阅读，思考，组织和调整代码，而normal模式下众多命令能帮助我们大大提高效率。</li>
<li>Tip8: Chunk your Undos: u能帮助我们撤销操作，合理在insert模式和normal模式切换能让undo操作更高效</li>
<li>Tip9: Compose Repeatable Changes: vim is optimized for repetition。在vim里完成一个操作通常有多种方式，但是容易使用”.”来重复的是比较好的方式。</li>
<li>Tip10: Use Counts to Do Simple Arithmetic: vim很多命令都可以在前边加上数字表示重复几次命令，比如<code>&lt;C-a&gt;</code>对数字加1，如果用<code>10&lt;C-a&gt;</code>就是加上10。</li>
<li>Tip11: Don’t Count If You Can Repeat:  Keep your undo history clean.</li>
<li>Tip12: Combine and Conquer:  Operator + Motion = Action，vim的强大在于组合命令的威力。比如d{motion}，”daw”是”delete a word”，比如”gU{motion}”的意思是Make {motion} text uppercase, “gUaw” 就是把一个单词转成大写，”gUap”就是把一个段落大写</li>
</ul>
<h2 id="CHAPTER3-Insert-Mode"><a href="#CHAPTER3-Insert-Mode" class="headerlink" title="CHAPTER3: Insert Mode"></a>CHAPTER3: Insert Mode</h2><ul>
<li>Tip13: Make Corrections Instantly from Insert Mode: 快速修正错误，<code>&lt;C-h&gt;</code>删除一个字符，<code>&lt;C-w&gt;</code>删除一个单词,<code>&lt;C-u&gt;</code>删除一行。实际上这些快捷键在和终端里是一样的，刻意替代退格键。</li>
<li>Tip14: Get Back to Normal Mode: <code>&lt;ESC&gt;</code> 和 <code>&lt;C-[&gt;</code>都可以从insert模式切到normal模式，在insert模式下<code>&lt;C-o&gt;</code>是短暂切到normal模式之后切回insert模式，方便我们执行单个normal模式下的命令。配合上边快捷键我们就能在主键盘区域高效完成编辑操作。(把caps lock键改成ctrl)</li>
<li>Tip15: Paste from a Register Without Leabing Insert Mode: <code>&lt;C-r&gt;{register}</code>，实现在insert模式下粘贴</li>
<li>Tip16: Do Back-of-the-Envelope Calculations in Place:  vim的表达式寄存器(=)可以用来计算数值。<code>&lt;C-r&gt;=6*35&lt;CR&gt;</code>可以插入计算结果为210</li>
<li>Tip17: Insert Unusual Characters By Character Code: 在插入模式下，可以用unicode码插入，比如 <code>&lt;C-v&gt;065</code> 将插入字符A</li>
<li>Tip18: Insert Unusual Characters by Digraph: <code>:h digraph-table</code> ，也是用来插入特殊字符</li>
<li>Tip19: Overwrite Existing Text with Replace Mode: <code>R</code>进入replace mode，平常我使用<code>r</code>进行单个字符修改，使用<code>R</code>可以从当前字符开始覆盖。</li>
</ul>
<h2 id="CHAPTER4-Visual-Mode"><a href="#CHAPTER4-Visual-Mode" class="headerlink" title="CHAPTER4: Visual Mode"></a>CHAPTER4: Visual Mode</h2><ul>
<li>Tip20: Grok Visual Mode:  Visual Mode可以实现字符、行、块选择，结合其他命令实现多种操作。</li>
<li>Tip21: Define a Visual Selection: <code>v</code>字符选择, <code>V</code>行选择，<code>&lt;C-v&gt;</code>块选，<code>gv</code>重新执行最后一个visual mode的选择区域,<code>o</code>可以跳到选择的另一头，方便选择错误的时候两头调整。比如<code>vw</code>选中一个单词，<code>viw</code>无论你在单词的哪个位置都可以选中当前单词。<code>vi(</code>就更方便了，你可以在括号里的任何位置选中当前括号里所有内容，执行修改或者删除等操作，还有<code>vit</code>选中html标签里的内容，<code>vif</code>选中函数里的内容。</li>
<li>Tip22: Repeat Line-Wise Visual Commands: 笔者经常使用visual mode选中需要缩进的代码块，然后执行<code>&gt;</code>向右缩进，使用<code>.</code>重复缩进。</li>
<li>Tip23: Prefer Operators to Visual Commands Where Possible: 优先使用操作符命令方便使用<code>.</code>重复命令</li>
<li>Tip24: Edit Tabular Data with Visual-Block Mode:  vim的visual mode很适合编辑表格类文本。使用 tabular 插件能方便地书写 markdown 格式的表格。</li>
<li>Tip25: Change Columns of Text: 在笔者使用nerd-commenter插件之前，实现多行注释都是用的多列编辑。</li>
<li>Tip26: Append After a Ragged Visual Block: 结合$等，我们可以在vim里方便地实现给多行最后加上分号等功能。</li>
</ul>
<h2 id="CHAPTER5-Command-Line-Mode"><a href="#CHAPTER5-Command-Line-Mode" class="headerlink" title="CHAPTER5: Command-Line Mode"></a>CHAPTER5: Command-Line Mode</h2><ul>
<li>Tip27: Meet Vim’s Command Line: 命令模式允许我们执行一个ex命令，搜索模式或者表达式</li>
<li>Tip28: Execute a Command on One or More Consecutive Lines: ex模式下可以同时对多行进行操作，比如<code>:1,3p</code>打出前三行</li>
<li>Tip29: Duplicate or Move Lines Using <code>:t</code> and <code>:m</code> Commands: <code>:t</code>是<code>:c</code>的简化命令，执行一样的功能。比如<code>:6copy.</code>把第六行拷贝到当前行下边，能直接用<code>:6t.</code>。<code>:m</code>用来执行移动行的功能，语法形式<code>:[range]move {address}</code></li>
<li>Tip30: Run Normal Mode Commands Across a Range: 再来看之前的一个例子，如果想给多行最后添加分号，我们刻意操作一行<code>A,&lt;ESC&gt;</code>表示在行尾插入一个逗号，之后我们在visual模式下选中多行，执行<code>:normal.</code>就能用<code>.</code>对这些行执行相同命令，或者执行<code>:normal A,</code>，也能给多行末尾添加逗号。结合多行选择和normal模式下的命令我们可以实现很多有用的操作。</li>
<li>Tip31: Repeat the Last Ex Command: 我们经常使用<code>.</code>来重复normal模式的上一条命令，重复ex命令要使用<code>@:</code></li>
<li>Tip32: Tab-Complete Your Ex Commands: 和在shell里一样，可以使用tab补全ex命令，也可以使用<code>&lt;C-d&gt;</code>列出所有候选项，使用<code>&lt;S-Tab&gt;</code>回滚到上一个候选项。</li>
<li>Tip33: Insert the Current Word at the Command Prompt: 在命令模式下，vim依然知道光标位置，使用<code>&lt;C-r&gt;&lt;C-w&gt;</code>可以插入当前光标所在单词。我觉得这个命令在你想替换一个超长单词的时候比较有用，貌似对中文支持不行。</li>
<li>Tip34: Recall Commands from History: 使用<code>:</code>进入命令模式以后就能使用上下键或者<code>&lt;C-p&gt;&lt;C-n&gt;</code>上翻下翻命令，列出所有搜索历史命令执行<code>q/</code>，列出所有历史Ex命令执行<code>q:</code>，<code>C-f</code>从命令行模式切换到命令行窗口。</li>
<li>Tip35: Run Commands in the Shell: 命令行模式前边加上<code>!</code>就可以执行shell命令，比如<code>:!ls</code>，注意内置的<code>:ls</code>显示的是buffer列表。也可以用<code>:shell</code>启动交互式shell会话，exit退出。<code>:read !{cmd}</code>可以使shell的命令写到buffer,<code>:write {cmd}</code>把buffer里的内容作为shell命令的标准输入。</li>
</ul>
<h2 id="CHAPTER6-Manage-Multiple-Files"><a href="#CHAPTER6-Manage-Multiple-Files" class="headerlink" title="CHAPTER6: Manage Multiple Files"></a>CHAPTER6: Manage Multiple Files</h2><ul>
<li>Tip36: Track Open Files with the Buffer List: 在一次编辑会话中我们可以同时打开多个文件，vim使用buffer list管理他们。当我们在vim里编辑一个文件时，实际上是在编辑一个文件的内存表示，在vim术语里头叫做buffer。文件存储在硬盘，而buffers存在于内存中，大部分vim命令操作的是buffer，只有<code>:write</code>等少数命令会操作到硬盘中的文件。<code>:ls</code>列出所有buffer，<code>:bnext</code>或者<code>:bn</code>跳转到下一个buffer，<code>:bprev</code>或者<code>bp</code>跳到上一个，使用<code>C-^</code>来回切换，<code>:bd</code>移除当前buffer，同样还有<code>:bfirst</code>和<code>:blast</code>。如果觉得麻烦我可以可以映射命令<code>nnoremap &lt;silent&gt; [b :bprevious&lt;CR&gt;</code></li>
<li>Tip37: Group Buffers into a Collection with the ArgumentList: <code>:args</code>代表传入给vim命令的待编辑文件列表，我们也可以使用<code>:args file1 file2</code>命令组织待编辑的文件buffer。</li>
<li>Tip38: Manage Hidden Files: 如果我们修改了buffer里的文件，必须保存才能切换到下一个文件，否则vim提示 “No write since last change (add ! to override)”。我们可以使用<code>:w</code>保存或者<code>:e!</code>放弃所有更改重新加载文件。</li>
<li>Tip39: Divide Your Workspace into Split Windows: 分屏是笔者平常写代码的时候最最常用的功能，能让你同时浏览多个文件快速输理逻辑（所以平常写代码不要太长，限定80或者120列，否则分屏看起来比较痛苦）。可以用<code>&lt;C-w&gt;s</code>横分屏或者<code>&lt;C-w&gt;v</code>竖分屏，或者<code>:sp {file}</code>横分屏<code>:vsp {file}</code>竖分屏 。分频后，用<code>&lt;C-w&gt;h</code> <code>&lt;C-w&gt;j</code>等切换窗口，hjkl和移动命令对应，<code>&lt;C-w&gt;</code>循环切换。使用<code>&lt;C-w&gt;c</code>或者<code>:cl[ose]</code>关闭当前窗口，使用<code>&lt;C-w&gt;o</code>或<code>:on[ly]</code>只保留当前窗口。还有几个调整窗口大小的命令:<code>&lt;C-w&gt;=</code>重置所有窗口相等大小,<code>&lt;C-w&gt;_</code>当前窗口高度最大化，<code>&lt;C-w&gt;|</code>当前窗口宽度最大化。嗯，是不是命令太多头都大了，记住常用的几个天天使用就好，我现在就慢慢都习惯了，效率还是挺高的。</li>
<li>Tip40: Organize Your Window Layouts with Tab Pages: buffer+分屏+tab组合起来实现了vim强大的多文件编辑功能。vim的tab和其他常用的编辑器有很大不同，大多数编辑器每打开一个文件就会生成一个tab，但是当我们用<code>:edit {file}</code>打开一个文件时，vim并不会自动创建新标签，而是使用新的buffer加载文件。这样的好处就是我们可以使用vim的tab来组织工作区，举个例子，笔者有时用一个vim开了三个tab（工作区），每个tab下我又分屏打开了多个文件，最多的时候能打开十来个文件。一个工作区编写后端代码，一个工作区查看前端代码，一个工作区用来修改测试脚本。当然这种情况比较少，打开这么多文件大脑负担会比较重，其实有了ctrlP等插件后定位和打开文件已经相当迅速了，在一个工作区中也能快速切换，而且开多了可能还会有性能问题。使用<code>:tabedit {filename}</code>打开新标签页，没有文件名打开一个包含空buffer的标签页。如果打开了多个窗口，使用<code>&lt;C-w&gt;T</code>会把当前窗口移到一个新的标签页，如果只使用一个窗口，使用<code>:close</code>关闭当前标签和窗口，或者<code>:tabclose</code>关闭当前标签页（不管有几个窗口），<code>:tabonly</code>只保留当前标签页面。使用<code>gt</code>和<code>gT</code>来回在标签页跳转，或者用<code>:tabn</code>和<code>:tabp</code></li>
</ul>
<h2 id="CHAPTER7-Open-Files-and-Save-Them-to-Disk"><a href="#CHAPTER7-Open-Files-and-Save-Them-to-Disk" class="headerlink" title="CHAPTER7: Open Files and Save Them to Disk"></a>CHAPTER7: Open Files and Save Them to Disk</h2><ul>
<li>Tip41: Open a File by Its Filepath Using <code>:edit</code> : 可以使用<code>:e {filepath}</code>在vim里打开文件。</li>
<li>Tip42: Open a File by Its Filename Using <code>:finded {filename}</code> : 我更推荐ctrlP插件来查找文件，相当强大快捷。</li>
<li>Tip43: Explore the File System with newtrw: 我更推荐nerdTree插件来实现文件树浏览。</li>
<li>Tip44: Save Files to Nonexistent Directories: <code>:mkdir -p %:h</code>之后<code>:w</code></li>
<li>Tip45: Save a File as the Super User: 我们经常忘记sudo去编辑一个文件，结果保存的时候会提示readonly无法保存。<code>:w !sudo tee % &gt; /dev/null</code></li>
</ul>
<h2 id="CHAPTER8-Navigate-inside-Fileds-with-Motions"><a href="#CHAPTER8-Navigate-inside-Fileds-with-Motions" class="headerlink" title="CHAPTER8: Navigate inside Fileds with Motions"></a>CHAPTER8: Navigate inside Fileds with Motions</h2><ul>
<li>Tip46: Keep your Fingers on the Home Row: vim的很多设计让我们集中在主键盘区，从而避免的手指的来回移动。最明显的就是不使用上下左右，而是使用”hjkl”，习惯了以后效率会很高。</li>
<li>Tip47: Distinguish Betwween Real Lines and Display Lines: 当一行过长时，vim会分几行显示，实际上这几行叫做显示行，看起来是多行实际上没有换行符。我们用<code>j</code>和<code>k</code>在真实行之间向下或者向上移动，而对于显示行，我们使用<code>gj</code>和<code>gk</code>来移动。实际上还有几个类似的命令都可以在前面加上g来操作显示行。比如<code>g0</code>和g<code>g&amp;</code>移动到显示行的行首和行尾</li>
<li>Tip48: Move Word-Wise: 文本编辑一个常用操作就是在单词之间移动，最常用的几个<ul>
<li>w: 移到下一个单词首部, 助记(for-)Word</li>
<li>b: 移到上一个单词首部, 助记(Back-)word</li>
<li>e: 移到下一个单词尾部</li>
<li>ge: 移到上一个单词尾部</li>
</ul>
</li>
<li>Tip49: Find by Character: 一个常用操作是搜索一行里的字符<code>f{char}</code>，<code>;</code>重复搜索跳转到下一个相同字符，<code>,</code>跳转到上一个搜索字符位置。<ul>
<li>f{char}: 移到char的下一次出现</li>
<li>F{char}: 移到char的上一次出现</li>
<li>t{char}: 移到(To)char出现的位置的前一个字符，我们可以用<code>dt{char}</code>删除直到字符char的下一次出现，比如我经常用来删除一个括号里的内容，<code>dt)</code>我经常用来删除右括号前的所有字符</li>
<li>T{char}: 移到上一个char的前一个字符位置</li>
</ul>
</li>
<li>Tip50: Search to Navigate: <code>/{word}&lt;CR&gt;</code>我们可以用命令模式中的<code>/</code>来执行搜索</li>
<li>Tip51: Trace your Selection with Precision Text Objects: “Text objects”允许哦我们直接和括号，引用，xml标签等直接交互。比如我们想直接选定括号里的内容，使用<code>vi}</code>，”Text objects”通常用来操作结构化的数据，</li>
<li><p>Tip52: Delete Around, or Change Inside: 使用text objects我们能实现在一个单词内部实现操作当前单词的需求，而不用移到单词首部</p>
<ul>
<li>iw: current word</li>
<li>aw: current word plus one space, 比如我们可以用<code>daw</code>在一个单词的任意位置删除当前单词，而不用移到首部</li>
<li>is: current sentence</li>
<li>as: current sentence plus one space</li>
<li>ip: current paragraph</li>
<li>ap: current paragraph plus one blank line</li>
</ul>
</li>
<li><p>Tip53: Mark Your Place and snap Back to it :  在vim里可以给位置做标记从而快速跳转。<code>m{mark}</code>和 `mark  分别标记和跳转。有几个常用的跳转:</p>
<ul>
<li><code></code>    当前文件的上一个跳转</li>
<li>`.    Location of Last change</li>
<li>`^    Location of last insertion</li>
</ul>
</li>
<li><p>Tip54: Jump Between Matching Parentheses: 最常用的就是使用%在括号之间跳转，我们还可以用vim插件matchit增强功能</p>
</li>
</ul>
<h2 id="CHAPTER-9-Navigate-Betwween-Files-With-Jumps"><a href="#CHAPTER-9-Navigate-Betwween-Files-With-Jumps" class="headerlink" title="CHAPTER 9: Navigate Betwween Files With Jumps"></a>CHAPTER 9: Navigate Betwween Files With Jumps</h2><ul>
<li><p>Tip55: Traverse the Jump List: <code>:jumps</code>能列出跳转历史，<code>&lt;C-o&gt;</code>和<code>&lt;C-i&gt;</code>能切换跳转</p>
<ul>
<li>[count]G     跳转到行数</li>
<li>%     跳转到对应的括号</li>
<li>( / )     跳转到上一个/下一个句子</li>
<li>{ / }    跳转到上一个/下一个段落</li>
<li>H/M/L    H/M/L分别跳转到屏幕顶部/中间/尾部</li>
<li>gf      跳转到文件，如果在 vim 中引入了某个文件路径可以直接跳转</li>
<li>&lt;C-]&gt;    跳转到当前关键字的第一次出现，经常用来查找定义</li>
<li><code>{mark}</code>   跳转到标记</li>
</ul>
</li>
<li><p>Tip56: Traverse the Change List: vim会记录当前buffer所有改变，用<code>:changes</code>查看。一般用diff工具我觉得更好看点。有写插件可以记录整个文件变更。</p>
</li>
<li><p>Tip57: Jump to the Filename Under the Cursor:  不如直接用ctrlP插件快速打开文件，不用记忆命令了，vim命令够多了.</p>
</li>
<li><p>Tip58: Snap Betwween Files Global Marks: 全局标记可以在文件中来回跳转，<code>m{char}</code>char为大写就是全局标记。</p>
</li>
</ul>
<h2 id="CHAPTER-10-Copy-and-Paste"><a href="#CHAPTER-10-Copy-and-Paste" class="headerlink" title="CHAPTER 10: Copy and Paste"></a>CHAPTER 10: Copy and Paste</h2><ul>
<li><p>Tip59: Delete, Yank, and Put with Vim’s Unnamed Register: 我们可以用<code>xp</code>来反转字母，用<code>ddp</code>反转两行，这些都是使用的无名寄存器。</p>
</li>
<li><p>Tip60: Grok Vim’s Registers: vim提供了多个寄存器，我们可以用<code>&quot;{register}</code>指定使用哪个寄存器，否则使用无名寄存器(“”)，所以使用<code>&quot;&quot;p</code>等价直接用p命令。System Clipboard(“+)和Selection(“*) Registers</p>
</li>
<li><p>Tip61: Replace a Visual Selection with a Register: 直接visual选中后使用粘贴命令p</p>
</li>
<li><p>Tip62: Paste from a Register: 在insert模式下可以用<code>&lt;C-r&gt;&quot;</code></p>
</li>
<li><p>Tip63: Interact with the System Clipboard: 粘贴的时候使用<code>:paste</code>能避免自动缩进，映射一个命令<code>:set pastetoggle=&lt;F2&gt;</code>比较方便，最好放到你的vimrc里。</p>
</li>
</ul>
<h2 id="CHAPTER-11-Macros"><a href="#CHAPTER-11-Macros" class="headerlink" title="CHAPTER 11: Macros"></a>CHAPTER 11: Macros</h2><ul>
<li><p>Tip64: Record and Execute a Macro: 宏经常用来对多行执行相同操作，我们可以录制宏并执行它。<code>q{register}</code>录制宏，之后q退出录制，用<code>:reg {register}</code>查看宏内容，用<code>@{register}</code>执行宏，使用<code>:[range]norm! @a</code>对多行执行宏。</p>
</li>
<li><p>Tip65: Normalize, Strike, Abort: 黄金法则：录制宏的时候，保证每个命令都是可重复的。</p>
</li>
<li><p>Tip66: Play Back with a Count; <code>.</code>重复命令的缺陷是无法指定次数，这个缺陷可以使用宏解决。</p>
</li>
<li><p>Tip67: Repeat a Change on Contiguous Lines: 可以用块选择后执行<code>normal @a</code>针对多行执行宏。</p>
</li>
<li><p>Tip68: Append Commands to a Macro: <code>q{char}</code>当char是大写的时候会把命令append到已经存在的对应的小写字母寄存器中。</p>
</li>
<li><p>Tip69: Act Upon a Collection of Files: 需要结合argdo命令针对多个文件执行宏，笔者没用过。</p>
</li>
<li><p>Tip70: Evaluate an Iterator to number Items in a List: 结合简单的vim脚本语句和宏能实现类似于给每行加上自增行号的需求。</p>
</li>
<li><p>Tip71: Edit the Contents of a Macro: <code>put {register}</code>可以输出当前宏命令，编辑以后yank到寄存器里。</p>
</li>
</ul>
<h2 id="CHAPTER-12-Matching-Patterns-and-Literals"><a href="#CHAPTER-12-Matching-Patterns-and-Literals" class="headerlink" title="CHAPTER 12: Matching Patterns and Literals"></a>CHAPTER 12: Matching Patterns and Literals</h2><ul>
<li>Tip72: Tune the Case Sensitivity of Search Patterns: 全局设定忽略大小写<code>:set ignorecase</code>，对于单独的搜索在最后加上<code>\c</code>忽略大小写，</li>
<li><p>Tip73: Use the \v Pattern Switch for Regex Searches: vim的正则语法接近POSIX而不是Perl的。使用<code>\v</code>后缀能切换vim的正则引擎更接近Perl,Python or Ruby.</p>
</li>
<li><p>Tip74: Use the \V Literal Switch for Verbatim Searches: 使用<code>\V</code>意味着其后的pattern只有反斜线有特殊含义。如果你想匹配正则，使用 <code>\v</code>，如果你想精确匹配文本，使用<code>\V</code></p>
</li>
<li><p>Tip75: Use Parentheses to Capture Submatches: 使用括号匹配子组。<code>/\v&lt;(\w+)\_s+\1&gt;</code>可以匹配重复单词</p>
</li>
<li><p>Tip76: Stake the Boundaries of a Word: <code>&lt;</code>和<code>&gt;</code>作为单词分界符，比如可以用<code>\&lt;hello\&gt;</code>精确匹配hello</p>
</li>
<li><p>Tip77: Stake the Boundaries of a Match: 可以使用<code>\zs</code>和<code>\ze</code>截断匹配，只高亮需要的部分。</p>
</li>
<li><p>Tip78: Escape Problem Characters: vim提供了escape函数来实现重复的转义操作</p>
</li>
</ul>
<h2 id="CHAPTER-13-Search"><a href="#CHAPTER-13-Search" class="headerlink" title="CHAPTER 13: Search"></a>CHAPTER 13: Search</h2><ul>
<li><p>Tip79: Meet the Search Command: 命令模式输入<code>/</code>进入搜索模式并从当前光标位置往后搜索，<code>?</code>反向搜索。n和N分别是跳转到下一个和上一个搜索位置</p>
</li>
<li><p>Tip80: Highlight Search Matches: 高亮搜索结果<code>:set hlsearch</code>，静默搜索<code>:se nohlsearch</code></p>
</li>
<li><p>Tip81: Preview the First Match Before Execution: <code>:set incsearch</code>增量搜索，每按下一个字符就会显示搜索到的单词。搜索中使用<code>&lt;C-r&gt;&lt;C-w&gt;</code>补全。</p>
</li>
<li><p>Tip82: Count the Matches for the Current Pattern:  <code>:% s/words//gn</code> 可以统计出有多少匹配到的words，实际上就是使用的替换模式加上标志n</p>
</li>
<li><p>Tip83: Offset the Cursor to the End of a Search Match: 使用<code>/words/e&lt;CR&gt;</code>可以把光标放到搜索匹配的结尾</p>
</li>
<li><p>Tip84: Operate on a Complete Search Match: vim没有自带比较好的实现，不过能通过插件textobj-lastpat实现。</p>
</li>
<li><p>Tip85: Create Complex Patterns by Iterating upon Search History: 可以编辑search历史不断修正search的结果</p>
</li>
<li><p>Tip86: Search for the Current Visual Selection: 在normal模式下可以用 * 找到下一个匹配，这个不支持块选的区域，可以通过脚本实现</p>
</li>
</ul>
<h2 id="CHAPTER-14-Substitution"><a href="#CHAPTER-14-Substitution" class="headerlink" title="CHAPTER 14: Substitution"></a>CHAPTER 14: Substitution</h2><ul>
<li><p>Tip87: Meet the Substitute Command: 语法形式<code>:[range]s[ubstitute]/{pattern}/{string}/[flags]</code>，flags包含g(全局)，c(确认提示)，n(次数提示)，&amp;(复用上一个flag)</p>
</li>
<li><p>Tip88: Find and Replace Every Match in a File: 默认搜索只操作当前行第一个搜索，加flag g以后可以操作所有当前行的匹配，加上range之后我们可以操作所有当前文件的匹配。</p>
</li>
<li><p>Tip89: Eyeball Each Substitution: 替换过程中使用flag c每次替换vim都会有提示，比较安全</p>
</li>
<li><p>Tip90: Reuse the Last Search Pattern: Pressing <c-r>/ at the command line pastes the contents of the last search register in place.</c-r></p>
</li>
<li><p>Tip91: Replace with the Contents of a Register: We can insert the contents of a register by typing <c-r>{register}。如果待搜索的内容过长，实际上可以在normal模式下复制到寄存器里，然后插入到替换命令里头。</c-r></p>
</li>
<li><p>Tip92: Repeat the Previous Substitute Command:  We can always specify a new range and replay the substitution using the :&amp;&amp; command.</p>
</li>
<li><p>Tip93: Rearrange CSV Fields Using Submatches: 可以用<code>\{num}</code>在替换语句里使用<code>/</code>搜索命令捕获的分组。</p>
</li>
<li><p>Tip94: Perform Arithmetic on the Replacement: 这个是比较高级的用法，替换语句可以是一个vim脚本的表达式。</p>
</li>
<li><p>Tip95: Swap Two or More Words : 我们可以创建一个vim脚本变量字典来执行替换操作。Abolish.vim插件提供了非常便捷的语法支持替换操作: <code>:%S/{man,dog}/{dog,man}/g</code></p>
</li>
<li><p>Tip96: Find and Replace Across Multiple Files: 需要结合argdo命令多文件操作，我觉得不如用sed命令方便点。</p>
</li>
</ul>
<h2 id="CHAPTER-15-Global-Commands"><a href="#CHAPTER-15-Global-Commands" class="headerlink" title="CHAPTER 15: Global Commands"></a>CHAPTER 15: Global Commands</h2><ul>
<li><p>Tip97: Meet the Global Command: The :global command allows us to run an Ex command on each line that matches a particular pattern. <code>:[range] global[!] /{pattern}/ [cmd]</code></p>
</li>
<li><p>Tip98: Delete Lines Containing a Pattern: <code>/\v\&lt;\/?\w+&gt;</code> <code>:g//d</code>可以删除文件中的html标签行，</p>
</li>
<li><p>Tip99: Collect TODO Items in a Register: <code>:g/TODO</code>打出所有含有TODO的行，global模式命令执行echo。</p>
</li>
<li><p>Tip100:  Alphabetize the Properties of Each Rule in a CSS File: <code>:g/{/ .+1,/}/-1 sort</code></p>
</li>
</ul>
<h2 id="CHAPTER-16-Index-and-Navigate-Source-Code-with-ctags"><a href="#CHAPTER-16-Index-and-Navigate-Source-Code-with-ctags" class="headerlink" title="CHAPTER 16: Index and Navigate Source Code with ctags"></a>CHAPTER 16: Index and Navigate Source Code with ctags</h2><ul>
<li><p>Tip101: Meet ctags: ubuntu install ctags <code>sudo apt-get install exuberant-ctags</code>, mac <code>brew install ctags</code></p>
</li>
<li><p>Tip102: Configure Vim to Work with ctags:  生成tag命令<code>:!ctags -R</code>,映射一个<code>:nnoremap &lt;f5&gt; :!ctags -R&lt;CR&gt;</code>。</p>
</li>
<li><p>Tip103: Navigate Keyword Definitions with Vim’s Tag Navigation Commands: 有了tags文件就可以用<code>&lt;C-]&gt;</code>跳转了。笔者目前写python居多，使用的是python-mode里集成的rope插件，用来跳转，查找定义等非常方便。</p>
</li>
</ul>

      
    </div>
    <footer>
      
          
          <div class="clearfix"></div>
          <nav id="pagination">
  
    <a href="/2017/02/16/design/software-design-principle/" class="alignleft prev"><i class="fa fa-long-arrow-left"></i>Next</a>
  
  
    <a href="/2017/02/13/database/深入浅出mysql/" class="alignright next">Prev<i class="fa fa-long-arrow-right"></i></a>
  
  <div class="clearfix"></div>
</nav>
      
      <div class="clearfix"></div>
    </footer>
  </div>
</article>


<section id="comment">
  <h1 class="title">留言</h1>

  
</section>



    <div class="clearfix"></div>
  </div>
  <footer id="footer" class="inner"><div>
  
  &copy; 2018 PegasusWang
  
</div>
Powered by <a href="http://zespia.tw/hexo/" title="Hexo" target="_blank" rel="noopener">Hexo</a> and <a href="http://pages.github.com/" title="GitHub Pages" target="_blank" rel="noopener">GitHub Pages</a>

<div class="clearfix"></div>


<!--
<span id="busuanzi_container_site_pv">
    您是第<span id="busuanzi_value_site_pv"></span>次访问滴童鞋
</span>

<script async
src="https://dn-lbstatics.qbox.me/busuanzi/2.3/busuanzi.pure.mini.js">
</script>
-->
</footer>
  
<script src="/js/jquery.imagesloaded.min.js"></script>
<script src="/js/gallery.js"></script>
<script src="//netdna.bootstrapcdn.com/bootstrap/3.1.0/js/bootstrap.min.js"></script>




    <script type="text/javascript">
        (function(){

            $(window).scroll(function(){

                var scrollTop = $(window).scrollTop();
                if ( scrollTop >200 ){
                    $("#main-nav").removeClass('normal_mode').addClass('top_mode');
                } else{
                    $("#main-nav").removeClass('top_mode').addClass('normal_mode');
                }

            });

        })();
    </script>



  <link rel="stylesheet" href="/fancybox/jquery.fancybox.css" media="screen" type="text/css">
  <script src="/fancybox/jquery.fancybox.pack.js"></script>
  <script type="text/javascript">
  (function($){
    $('.fancybox').fancybox({
      'titlePosition': 'inside'
    });
  })(jQuery);
  </script>




<script type="text/javascript">
  
  $(function(){

    $('.title').hover(
      function() {      
        $(this).stop().animate(
          {'marginLeft': '10px'}, 200
        );   
      }, 
      function() {       
        $(this).stop().animate({'marginLeft': '0px'}, 200);      
      
    });   

  });

</script>


</body>
</html>